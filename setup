#!/bin/bash

set -euo pipefail

ROOT_DIR="$(cd "$(dirname "$0")" && pwd)"
SCRIPTS_DIR="$ROOT_DIR/scripts"

cd "$SCRIPTS_DIR"

run_step() {
	local script="$1"
	echo "Running $script..."
	bash "$script"
}

# Install essential dependencies
run_step install_dependencies.sh
run_step install_nerdfonts.sh
run_step install_brew.sh

if [[ -x /home/linuxbrew/.linuxbrew/bin/brew ]]; then
	eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
fi

if command -v brew >/dev/null 2>&1; then
	# Lazyvim bundle
	brew install rust
	brew install neovim
	brew install fd
	brew install fzf
	brew install ripgrep
	brew install lazygit
	brew install node
	brew install pyright

	# Python utilities
	brew install uv

	# Bash utilities
	brew install eza
	brew install starship
	brew install tmux
	brew install yazi
	brew install zoxide
else
	echo "Homebrew is not available; skipping brew package installation steps."
fi

# Personal configurations
run_step setup_gitconfig.sh
run_step backup_and_stow.sh
